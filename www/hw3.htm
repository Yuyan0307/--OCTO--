<html>
<head>
<meta charset="utf-8">
<title>身分證檢驗</title>
<link rel="stylesheet" type="text/css" href="css/css2.css"/>
</head>
<body>
<form >
    <script style="font-size: 90px;">
        function validateForm(form){
            if (!verifyId(form.id.value)){
                alert("身分證資料有誤，不對喔\n為無效身分證");
                return(false);	
            }
            alert("歡迎!!身分證資料正確，送出！\n有效身分證");
            form.submit();
            return(true);
        }
        
        function verifyId(id) {
            id = id.trim();
            verification = id.match("^[A-Z][12]\\d{8}$")
            if(!verification){
                return false
            }

            let conver = "ABCDEFGHJKLMNPQRSTUVXYWZIO"
            let weights = [1, 9, 8, 7, 6, 5, 4, 3, 2, 1, 1]

            id = String(conver.indexOf(id[0]) + 10) + id.slice(1);

            checkSum = 0
            for (let i = 0; i < id.length; i++) {
                c = parseInt(id[i])
                w = weights[i]
                checkSum += c * w
            }
            
            return checkSum % 10 == 0
        }
        </script>
    
<center>
<h1 id="as">身分證字號:</h1>
<input type="text" id="id" name="id" required placeholder="請輸入身分證字號" patter="[0-9 a-z A-Z]{4-10}" ><br>

<br>
<br>
<input type="submit" value="送出"    id="bu"  onClick="validateForm(this.form)"><br><br>
	<span id="span1">
		<a href="index.htm">首頁</a>
	</span>
</center>
</form>
</body>
</html>